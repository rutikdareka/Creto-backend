"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("oauth");exports.AsyncTwitterLogin=class{constructor({consumerKey:r,consumerSecret:t,callbackUrl:o}){if(!r&&"string"!=typeof r)throw new Error("AsyncTwitterLogin: `consumerKey` is required");if(!t&&"string"!=typeof t)throw new Error("AsyncTwitterLogin: `consumerSecret` is required");if(!o&&"string"!=typeof o)throw new Error("AsyncTwitterLogin: `callbackUrl` is required");this.consumerKey=r,this.consumerSecret=t,this.callbackUrl=o,this.oauth=new e.OAuth("https://api.twitter.com/oauth/request_token","https://api.twitter.com/oauth/access_token",this.consumerKey,this.consumerSecret,"1.0A",this.callbackUrl,"HMAC-SHA1")}request(){return new Promise(((e,r)=>{this.oauth.getOAuthRequestToken(((t,o,i,n)=>{if(t)return r(t);const{oauth_callback_confirmed:s}=n;if("true"!==s)return r(new Error("AsyncTwitterLogin: `oauth_callback_confirmed` is not `true` (Does your application have a callback url configured?)"));return e({token:o,tokenSecret:i,callbackConfirmed:s,redirectUrl:`https://api.twitter.com/oauth/authenticate?oauth_token=${o}`})}))}))}callback({token:e,tokenSecret:r,verifier:t}){return new Promise(((o,i)=>e||"string"==typeof e?r||"string"==typeof r?t||"string"==typeof t?void this.oauth.getOAuthAccessToken(e,r,t,((e,r,t,n)=>{if(e)return i(e);const{user_id:s,screen_name:c}=n;return o({userId:s,userName:c,userToken:r,userTokenSecret:t})})):i(new Error("AsyncTwitterLogin: `verifier` is required")):i(new Error("AsyncTwitterLogin: `tokenSecret` is required")):i(new Error("AsyncTwitterLogin: `token` is required"))))}};
